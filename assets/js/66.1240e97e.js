(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{527:function(e,n,t){"use strict";t.r(n);var s=t(20),a=Object(s.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("BackWikiBtn",{attrs:{id:"opq-wiki"}}),e._v(" "),t("h3",{attrs:{id:"消息宏介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息宏介绍"}},[e._v("#")]),e._v(" 消息宏介绍")]),e._v(" "),t("p",[t("strong",[e._v("所谓的消息宏类似其他框架的xx码个人觉得定义为宏更确切一些,肯定是在运行时解析替换的东西,也可叫做文本宏,通过发送文本达到内部替换进而实现具体的功能")])]),e._v(" "),t("p",[e._v("URL: http://127.0.0.1:8888/v1/LuaApiCaller")]),e._v(" "),t("p",[e._v("method :POST")]),e._v(" "),t("h5",{attrs:{id:"框架支持的宏"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#框架支持的宏"}},[e._v("#")]),e._v(" 框架支持的宏:")]),e._v(" "),t("ul",[t("li",[t("strong",[e._v("[表情182] 表情码通过拦截消息所得 支持多表情码嵌套 暂时没整理所有的表情代码")])]),e._v(" "),t("li",[t("strong",[e._v("[PICFLAG] 控制图文的顺序默认先图后文字在文字里插入此宏则改变为先文字后图现实")])]),e._v(" "),t("li",[t("strong",[e._v("[秀图40001] 范围 40000-40006 实现秀图发送 群有有效好友无效")])]),e._v(" "),t("li",[t("strong",[e._v("[GETUSERNICK(QQ)] 取某个QQ昵称 通过网络获取 不支持多个QQ 如获取QQ号为123456789的昵称 则插入发送文本消息[GETUSERNICK(123456789)]")])]),e._v(" "),t("li",[t("strong",[e._v("[ATALL()] @所有人")])]),e._v(" "),t("li",[t("strong",[e._v("[ATUSER(QQ1,QQ2,QQ3)]@某人 支持多个QQ以此类推如ATQQ为123和456则插入发送文本[ATUSER(123,456)] 如ATQQ为112233445566则插入发送文本[ATUSER(112233445566)]")])]),e._v(" "),t("li",[t("strong",[e._v("[吃货],[哇啊~],[喵喵拳]等部分动态表情 可以通过消息拦截到")])])]),e._v(" "),t("h5",{attrs:{id:"webapi请求参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webapi请求参数"}},[e._v("#")]),e._v(" WebAPi请求参数:")]),e._v(" "),t("p",[e._v("params:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("{\n  'qq':123456, #机器人QQ号\n  'funcname':SendMsgV2, #调用方法类型\n}\n")])])]),t("p",[t("strong",[e._v("以发送群消息为例")]),e._v("\nbody(json):")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('# 发送小表情\n{"ToUserUid":123456789,"SendToType":2,"SendMsgType":"TextMsg","Content":"[表情182]HelloWorld[表情182]"}\n\n# 发送先文字后图片 在文本任意位置插入宏 [PICFLAG] 即可\n{"ToUserUid":757360354,"SendToType":2,"SendMsgType":"PicMsg","PicPath":"./demo.jpg","Content":"HelloWorld[PICFLAG]"}\n\n# 发送秀图 图片demo将以秀图方式展示\n{"ToUserUid":757360354,"SendToType":2,"SendMsgType":"PicMsg","PicPath":"./demo.jpg","Content":"HelloWorld[秀图40006]"}\n\n# 获取123456789的昵称\n{"ToUserUid":123456789,"SendToType":2,"SendMsgType":"TextMsg","Content":"[GETUSERNICK(123456789)]HelloWorld[表情182]"}\n\n# AT 12345678\n{"ToUserUid":123456789,"SendToType":2,"SendMsgType":"TextMsg","Content":"[ATUSER(123456789)]HelloWorld[表情182]"}\n\n# AT全体成员\n{"ToUserUid":123456789,"SendToType":2,"SendMsgType":"TextMsg","Content":"[ATALL()]"}\n\n')])])]),t("h4",{attrs:{id:"luaapi发送xml-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#luaapi发送xml-json"}},[e._v("#")]),e._v(" LuaApi发送XML/JSON")]),e._v(" "),t("p",[t("strong",[e._v("⚠️我就不一一复制发送结构了 WebApi的Json 对应Lua里的table 映射规律是这样的 把Json的字段的引号都去掉 字段值的冒号换成=号 数组[]换成{}⚠️")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('if data.Content == "SendMsgV2Test" then\n        Api.Api_SendMsgV2( --私聊\n            CurrentQQ,\n            {\n                ToUserUid = 987654321,\n                SendToType = 2,\n                SendMsgType = "TextMsg",\n                Content = "[表情182]HelloWorld[表情182]"\n            }\n        )\n    end\n\n')])])]),t("hr")],1)}),[],!1,null,null,null);n.default=a.exports}}]);