(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{422:function(e,a,n){"use strict";n.r(a);var t=n(28),s=Object(t.a)({},(function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("BackWikiBtn"),e._v(" "),n("h2",{attrs:{id:"lua-获取方式如下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lua-获取方式如下"}},[e._v("#")]),e._v(" Lua 获取方式如下")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('function ReceiveFriendMsg(CurrentQQ, data)\n    if data.MsgType == "FriendFileMsg" then\n        --MsgType FriendFileMsg\n        -- Content {"FileID":"36615b65f95b09df4de35ea1c783c368_fde7a4c0-4648-4ec3-b580-2a33006507ac","FileName":"QQ录屏20200601223847.mp4","FileSize":14689605,"Tips":"[好友文件]"}\n        file = json.decode(data.Content)\n        res =\n            Api.Api_CallFunc(\n            CurrentQQ,\n            "OfflineFilleHandleSvr.pb_ftn_CMD_REQ_APPLY_DOWNLOAD-1200",\n            {FileID = file.FileID}\n        )\n        log.notice(" FileUrl Log\\n%s", res.Url)\n    end\n\n    return 1\nend\n')])])]),n("h2",{attrs:{id:"webapi-获取方式如下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webapi-获取方式如下"}},[e._v("#")]),e._v(" WebApi 获取方式如下")]),e._v(" "),n("p",[e._v("URL:  http://127.0.0.1:8888/v1/LuaApiCaller")]),e._v(" "),n("h5",{attrs:{id:"请求信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#请求信息"}},[e._v("#")]),e._v(" 请求信息:")]),e._v(" "),n("p",[e._v("params:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("{\n'qq': 123456789,  #bot的QQ\n'funcname': 'OfflineFilleHandleSvr.pb_ftn_CMD_REQ_APPLY_DOWNLOAD-1200'\n}\n")])])]),n("p",[e._v("body(json):")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('{\n"FileID":"36615b65f95b09df4de35ea1c783c368_86e0deb3-9794-4f05-aef9-d0065552b2b0"\n}\n')])])]),n("p",[e._v("response(json)")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('{\n"FileName": "xxxx.zip",\n"FileSize": 7896301,\n"FromUin": 1700487478,\n"Url": "http://101.89.38.105:80/?ver=2&rkey=651e190973eff9bc8a1cbc3f4c0a51f7c60b75fcfeba810787ac788658794261718d8d4f5b3ab22dd68a026155bb8413ea6cee463dd115d523924d74b4465e4b"\n}\n')])])]),n("p",[n("strong",[e._v("得到文件的Url 和文件名 正常下载保存即可")])])],1)}),[],!1,null,null,null);a.default=s.exports}}]);